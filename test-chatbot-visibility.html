<!DOCTYPE html>
<html>
<head>
    <title>Test Chatbot Alpha Visibility</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f3f4f6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #0E2F56;
        }
        .test-item {
            margin: 20px 0;
            padding: 15px;
            background: #f9fafb;
            border-left: 4px solid #3B82F6;
            border-radius: 4px;
        }
        .success {
            border-left-color: #22C55E;
            background: #f0fdf4;
        }
        .error {
            border-left-color: #EF4444;
            background: #fef2f2;
        }
        .warning {
            border-left-color: #FF8C00;
            background: #fffbeb;
        }
        button {
            background: #0E2F56;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #1a4275;
        }
        .log {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .log-entry {
            margin: 5px 0;
            padding: 3px 0;
            border-bottom: 1px solid #374151;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Test de visibilit√© du Chatbot Alpha</h1>

        <div id="results"></div>

        <div>
            <button onclick="runTests()">üß™ Lancer les tests</button>
            <button onclick="checkDatabase()">üóÑÔ∏è V√©rifier la base de donn√©es</button>
            <button onclick="window.location.reload()">üîÑ Recharger</button>
            <button onclick="openMainApp()">üöÄ Ouvrir l'application</button>
        </div>

        <div class="log" id="log">
            <div class="log-entry">üìã Console de logs...</div>
        </div>
    </div>

    <script type="module">
        window.log = function(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            const emoji = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
            entry.textContent = `${emoji} ${new Date().toLocaleTimeString()} - ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        };

        window.addResult = function(title, status, message) {
            const results = document.getElementById('results');
            const item = document.createElement('div');
            item.className = `test-item ${status}`;
            item.innerHTML = `<strong>${title}</strong><br/>${message}`;
            results.appendChild(item);
        };

        window.openMainApp = function() {
            window.location.href = '/';
        };

        window.runTests = async function() {
            document.getElementById('results').innerHTML = '';
            log('üîÑ D√©but des tests de visibilit√© du chatbot Alpha...');

            // Test 1: V√©rifier si le DOM contient le chatbot
            setTimeout(() => {
                log('Test 1: Recherche du widget chatbot dans le DOM...');

                const chatbotWidgets = document.querySelectorAll('[class*="chatbot"], [class*="alpha"]');
                if (chatbotWidgets.length > 0) {
                    addResult('‚úÖ Widget trouv√©', 'success', `${chatbotWidgets.length} √©l√©ment(s) du chatbot trouv√©(s) dans le DOM`);
                    log(`Trouv√© ${chatbotWidgets.length} √©l√©ment(s) du chatbot`, 'success');
                } else {
                    addResult('‚ùå Widget non trouv√©', 'error', 'Aucun √©l√©ment du chatbot trouv√© dans le DOM');
                    log('Aucun √©l√©ment du chatbot trouv√© dans le DOM', 'error');
                }

                // Test 2: V√©rifier les √©l√©ments avec z-50
                log('Test 2: Recherche d\'√©l√©ments avec z-index √©lev√©...');
                const highZElements = document.querySelectorAll('[class*="z-50"]');
                log(`Trouv√© ${highZElements.length} √©l√©ment(s) avec z-50`);

                // Test 3: V√©rifier les styles CSS charg√©s
                log('Test 3: V√©rification des animations CSS...');
                const animations = ['animate-slide-up', 'animate-fade-in', 'animate-scale-in'];
                animations.forEach(anim => {
                    const testDiv = document.createElement('div');
                    testDiv.className = anim;
                    document.body.appendChild(testDiv);
                    const styles = window.getComputedStyle(testDiv);
                    const hasAnimation = styles.animation !== 'none' && styles.animation !== '';
                    document.body.removeChild(testDiv);

                    if (hasAnimation) {
                        log(`Animation ${anim} : OK`, 'success');
                    } else {
                        log(`Animation ${anim} : Manquante`, 'warning');
                    }
                });

                addResult('‚úÖ Tests termin√©s', 'success', 'Consultez les logs ci-dessous pour plus de d√©tails');
                log('‚úÖ Tests termin√©s', 'success');
            }, 1000);
        };

        window.checkDatabase = async function() {
            log('üóÑÔ∏è V√©rification de la base de donn√©es...');
            addResult('‚ÑπÔ∏è Base de donn√©es', 'warning', 'Cette page HTML ne peut pas acc√©der directement √† Supabase. Veuillez ouvrir l\'application principale.');
        };

        // Auto-run tests on load
        window.addEventListener('load', () => {
            log('‚ú® Page charg√©e, pr√™t pour les tests');
            log('üí° Cliquez sur "Ouvrir l\'application" pour voir le chatbot en action');
        });
    </script>
</body>
</html>
